"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[989],{6989:(e,s,t)=>{t.r(s),t.d(s,{default:()=>x});var r=t(9379),a=t(5043),c=t(465),l=t(1439),o=t(475),n=t(2603),i=t(2339),d=t(579);const m=e=>{let{product:s,onClose:t,onAddToCart:r}=e;return s?(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-2xl w-full relative",children:[(0,d.jsx)("button",{onClick:t,className:"absolute top-4 right-4 text-gray-600 hover:text-gray-900",children:(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,d.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,d.jsx)("div",{className:"md:w-1/2 mb-4 md:mr-8",children:(0,d.jsx)("img",{src:s.image_url||"/default-product.jpg",alt:s.name,className:"w-full h-auto rounded-lg object-cover"})}),(0,d.jsxs)("div",{className:"md:w-1/2",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold mb-2",children:s.name}),(0,d.jsx)("p",{className:"text-gray-600 mb-4",children:s.description}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("span",{className:"text-xl font-semibold text-green-700",children:(0,o.$)(s.price)}),s.stock<=5&&(0,d.jsxs)("span",{className:"ml-2 text-red-500 text-sm",children:["Only ",s.stock," left in stock!"]})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("strong",{children:"Category:"})," ",s.category]}),(0,d.jsx)("button",{onClick:()=>r(s),disabled:0===s.stock,className:"w-full py-2 rounded-md text-white font-semibold ".concat(s.stock>0?"bg-green-600 hover:bg-green-700":"bg-gray-400 cursor-not-allowed"),children:s.stock>0?"Add to Cart":"Out of Stock"})]})]})]})}):null},x=()=>{const[e,s]=(0,a.useState)([]),[t,x]=(0,a.useState)(!0),[u,g]=(0,a.useState)([]),[h,j]=(0,a.useState)({category:"",stock:!0}),[p,f]=(0,a.useState)("name-asc"),[b,v]=(0,a.useState)(1),[N,y]=(0,a.useState)(8),[w,k]=(0,a.useState)(null),{addToCart:C}=(0,n._)();(0,a.useEffect)((()=>{(async()=>{try{const{data:e,error:s}=await c.N.from("categories").select("name").order("name");if(s)throw s;g(e.map((e=>e.name)))}catch(e){console.error("Error fetching categories:",e),i.Ay.error("Failed to load categories")}})(),A()}),[h]);const A=async()=>{try{x(!0);let e=c.N.from("products").select("*");h.stock&&(e=e.gt("stock",0)),h.category&&(e=e.eq("category",h.category));const{data:t,error:r}=await e;if(r)throw r;s(t)}catch(e){console.error("Error fetching products:",e)}finally{x(!1)}},S=e=>{e.stock>0&&(C(e),i.Ay.success((0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("span",{className:"font-medium",children:e.name}),(0,d.jsx)("span",{className:"ml-2",children:"added to cart!"})]})))},L=(e=>{const s=[...e];switch(p){case"price-asc":return s.sort(((e,s)=>e.price-s.price));case"price-desc":return s.sort(((e,s)=>s.price-e.price));case"name-asc":return s.sort(((e,s)=>e.name.localeCompare(s.name)));case"name-desc":return s.sort(((e,s)=>s.name.localeCompare(e.name)));default:return s}})((e=>e.filter((e=>!h.category||e.category===h.category)))(e)),F=b*N,I=F-N,O=L.slice(I,F),P=Math.ceil(L.length/N);return(0,d.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,d.jsx)(l.A,{}),(0,d.jsx)("div",{className:"bg-green-700 text-white py-16",children:(0,d.jsxs)("div",{className:"max-w-7xl mx-auto px-4",children:[(0,d.jsx)("h1",{className:"text-4xl font-bold mb-4",children:"Our Spice Collection"}),(0,d.jsx)("p",{className:"text-lg",children:"Discover our premium selection of spices from around the world"})]})}),(0,d.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,d.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold",children:"Filters"}),(0,d.jsx)("button",{onClick:()=>{j({category:"",stock:!0}),f("name-asc")},className:"text-green-600 hover:text-green-700",children:"Reset All"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,d.jsxs)("select",{value:h.category,onChange:e=>j((0,r.A)((0,r.A)({},h),{},{category:e.target.value})),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500",children:[(0,d.jsx)("option",{value:"",children:"All Categories"}),u.map((e=>(0,d.jsx)("option",{value:e,children:e},e)))]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock"}),(0,d.jsxs)("select",{value:h.stock,onChange:e=>j((0,r.A)((0,r.A)({},h),{},{stock:"true"===e.target.value})),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500",children:[(0,d.jsx)("option",{value:"true",children:"In Stock"}),(0,d.jsx)("option",{value:"false",children:"All Products"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),(0,d.jsxs)("select",{value:p,onChange:e=>f(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500",children:[(0,d.jsx)("option",{value:"name-asc",children:"Name (A-Z)"}),(0,d.jsx)("option",{value:"name-desc",children:"Name (Z-A)"}),(0,d.jsx)("option",{value:"price-asc",children:"Price (Low to High)"}),(0,d.jsx)("option",{value:"price-desc",children:"Price (High to Low)"})]})]})]})]}),t?(0,d.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,d.jsx)("p",{children:"Loading products..."})}):(0,d.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:O.map((e=>(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>(e=>{k(e)})(e),children:[(0,d.jsx)("div",{className:"relative h-48 w-full",children:(0,d.jsx)("img",{src:e.image_url||"/default-product.jpg",alt:e.name,className:"absolute inset-0 w-full h-full object-cover"})}),(0,d.jsxs)("div",{className:"mt-4",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold",children:e.name}),(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsx)("span",{className:"text-green-600 font-bold",children:(0,o.$)(e.price)}),(0,d.jsx)("button",{onClick:s=>{s.stopPropagation(),S(e)},disabled:0===e.stock,className:"px-3 py-1 rounded-md text-sm transition-colors ".concat(e.stock>0?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:e.stock>0?"Add to Cart":"Out of Stock"})]})]})]},e.id)))}),P>1&&(0,d.jsx)("div",{className:"flex justify-center mt-8",children:Array.from({length:P},((e,s)=>s+1)).map((e=>(0,d.jsx)("button",{onClick:()=>(e=>{v(e)})(e),className:"mx-1 px-4 py-2 rounded-md ".concat(b===e?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e},e)))})]}),w&&(0,d.jsx)(m,{product:w,onClose:()=>{k(null)},onAddToCart:S})]})}},475:(e,s,t)=>{t.d(s,{$:()=>r});const r=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}}]);
//# sourceMappingURL=989.3d4f7cc5.chunk.js.map