"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[157],{9332:(e,s,r)=>{r.d(s,{A:()=>i});r(5043);var a=r(3216),t=r(5475),n=r(579);const i=e=>{let{children:s}=e;const r=(0,a.zy)(),i=[{path:"/admin",name:"Dashboard",icon:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{path:"/admin/orders",name:"Orders",icon:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})},{path:"/admin/products",name:"Products",icon:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})},{path:"/admin/users",name:"Users",icon:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})},{path:"/admin/sales-dashboard",name:"Sales Dashboard",icon:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 11V7a4 4 0 118 0v4m-1 4h-6m6 0a2 2 0 11-4 0m4 0a2 2 0 11-4 0m-4 0H5m6 0a2 2 0 11-4 0m4 0a2 2 0 11-4 0"})})}];return(0,n.jsxs)("div",{className:"min-h-screen bg-gray-100 flex",children:[(0,n.jsxs)("div",{className:"w-64 bg-white shadow-lg",children:[(0,n.jsx)("div",{className:"h-16 bg-green-700 flex items-center px-6",children:(0,n.jsx)("span",{className:"text-white text-lg font-semibold",children:"Admin Panel"})}),(0,n.jsxs)("nav",{className:"mt-6",children:[i.map((e=>(0,n.jsxs)(t.N_,{to:e.path,className:"flex items-center px-6 py-3 text-gray-700 hover:bg-gray-100 ".concat(r.pathname===e.path?"bg-gray-100 border-r-4 border-green-700":""),children:[e.icon,(0,n.jsx)("span",{className:"mx-3",children:e.name})]},e.path))),(0,n.jsxs)(t.N_,{to:"/",className:"flex items-center px-6 py-3 text-gray-700 hover:bg-gray-100 mt-4",children:[(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),(0,n.jsx)("span",{className:"mx-3",children:"Back to Site"})]})]})]}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"bg-white shadow-sm h-16 flex items-center px-8",children:[(0,n.jsx)("div",{className:"flex-1"}),(0,n.jsx)("div",{className:"flex items-center space-x-4",children:(0,n.jsx)("span",{className:"text-gray-700",children:"Admin"})})]}),(0,n.jsx)("div",{className:"p-8",children:s})]})]})}},4157:(e,s,r)=>{r.r(s),r.d(s,{default:()=>o});var a=r(5043),t=r(465);const n=e=>{if(!e)return"N/A";return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};var i=r(2339),l=r(9332),d=r(579);const o=()=>{const[e,s]=(0,a.useState)([]),[r,o]=(0,a.useState)(!0),[c,m]=(0,a.useState)(""),[x,h]=(0,a.useState)("list"),[u,g]=(0,a.useState)(1),[p,v]=(0,a.useState)(10);(0,a.useEffect)((()=>{j()}),[]);const j=async()=>{try{var e;o(!0);const{data:{user:r},error:a}=await t.N.auth.getUser();if(a)throw console.error("Error getting current user:",a),a;if(console.log("Current User:",r),console.log("Current User Metadata:",null===r||void 0===r?void 0:r.user_metadata),!r)throw console.error("No current user found"),new Error("No user logged in");const n=null===(e=r.user_metadata)||void 0===e?void 0:e.is_admin;if(console.log("Is Admin:",n),!n)throw console.error("Unauthorized access: User is not an admin"),new Error("Unauthorized access: User is not an admin");const{data:i,error:l}=await t.E.auth.admin.listUsers();if(l)throw console.error("Error listing users:",l),l;const d=i.users.map((e=>{var s;return{id:e.id,email:e.email,name:(null===(s=e.user_metadata)||void 0===s?void 0:s.name)||"N/A",created_at:e.created_at}}));s(d)}catch(r){console.error("Error fetching users:",r),i.Ay.error("Failed to load users: ".concat(r.message))}finally{o(!1)}},y=e.filter((e=>"akil.ai.dev@gmail.com"!==e.email&&(e.email.toLowerCase().includes(c.toLowerCase())||e.name&&e.name.toLowerCase().includes(c.toLowerCase())))),b=Math.ceil(y.length/p);return r?(0,d.jsx)("div",{className:"min-h-screen bg-gray-100 p-6",children:(0,d.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-700"})})}):(0,d.jsx)(l.A,{children:(0,d.jsx)("div",{className:"min-h-screen bg-gray-100",children:(0,d.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,d.jsx)("div",{className:"flex justify-between items-center mb-8",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),(0,d.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage and monitor user accounts"})]})}),(0,d.jsx)("div",{className:"mb-4",children:(0,d.jsx)("button",{onClick:()=>h("list"),className:"mr-2 px-4 py-2 rounded ".concat("list"===x?"bg-green-600 text-white":"bg-gray-200"),children:"List View"})}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"mr-2",children:"Items per page:"}),(0,d.jsxs)("select",{value:p,onChange:e=>{v(Number(e.target.value)),g(1)},className:"border border-gray-300 rounded-md",children:[(0,d.jsx)("option",{value:5,children:"5"}),(0,d.jsx)("option",{value:10,children:"10"}),(0,d.jsx)("option",{value:20,children:"20"}),(0,d.jsx)("option",{value:50,children:"50"})]})]}),(0,d.jsx)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:(0,d.jsxs)("div",{className:"max-w-lg",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Users"}),(0,d.jsx)("input",{type:"text",value:c,onChange:e=>m(e.target.value),placeholder:"Search by name or email...",className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500"})]})}),(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,d.jsxs)("table",{className:"w-full divide-y divide-gray-200",children:[(0,d.jsx)("thead",{className:"bg-gray-50",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Registered At"}),(0,d.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,d.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:(()=>{const e=(u-1)*p;return y.slice(e,e+p)})().map((r=>(0,d.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("div",{className:"text-sm text-gray-500",children:r.email})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("div",{className:"text-sm font-medium text-gray-900",children:r.name})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("div",{className:"text-sm text-gray-500",children:n(r.created_at)})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,d.jsx)("button",{onClick:()=>(async r=>{if(window.confirm("Are you sure you want to delete this user?"))try{const{error:a}=await t.N.from("users").delete().eq("id",r);if(a)throw a;s(e.filter((e=>e.id!==r))),i.Ay.success("User deleted successfully")}catch(a){console.error("Error deleting user:",a),i.Ay.error("Failed to delete user")}})(r.id),className:"text-red-600 hover:text-red-900 mr-4",children:"Delete"})})]},r.id)))})]}),b>1&&(0,d.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,d.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,d.jsx)("button",{onClick:()=>g(Math.max(1,u-1)),disabled:1===u,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Previous"}),(0,d.jsx)("button",{onClick:()=>g(Math.min(b,u+1)),disabled:u===b,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Next"})]}),(0,d.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,d.jsx)("div",{children:(0,d.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing"," ",(0,d.jsx)("span",{className:"font-medium",children:(u-1)*p+1})," ","to"," ",(0,d.jsx)("span",{className:"font-medium",children:Math.min(u*p,y.length)})," ","of"," ",(0,d.jsx)("span",{className:"font-medium",children:y.length})," ","users"]})}),(0,d.jsx)("div",{children:(0,d.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,d.jsxs)("button",{onClick:()=>g(Math.max(1,u-1)),disabled:1===u,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:[(0,d.jsx)("span",{className:"sr-only",children:"Previous"}),"Previous"]}),[...Array(b)].map(((e,s)=>(0,d.jsx)("button",{onClick:()=>g(s+1),className:"relative inline-flex items-center px-4 py-2 border text-sm font-medium ".concat(u===s+1?"z-10 bg-green-50 border-green-500 text-green-600":"border-gray-300 text-gray-500 hover:bg-gray-50"),children:s+1},s))),(0,d.jsxs)("button",{onClick:()=>g(Math.min(b,u+1)),disabled:u===b,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:[(0,d.jsx)("span",{className:"sr-only",children:"Next"}),"Next"]})]})})]})]})]})]})})})}}}]);
//# sourceMappingURL=157.21bbdba7.chunk.js.map