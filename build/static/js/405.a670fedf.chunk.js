"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[405],{9332:(e,s,t)=>{t.d(s,{A:()=>d});t(5043);var a=t(3216),r=t(5475),n=t(579);const d=e=>{let{children:s}=e;const t=(0,a.zy)(),d=[{path:"/admin",name:"Dashboard",icon:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{path:"/admin/orders",name:"Orders",icon:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})},{path:"/admin/products",name:"Products",icon:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})},{path:"/admin/users",name:"Users",icon:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})},{path:"/admin/sales-dashboard",name:"Sales Dashboard",icon:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 11V7a4 4 0 118 0v4m-1 4h-6m6 0a2 2 0 11-4 0m4 0a2 2 0 11-4 0m-4 0H5m6 0a2 2 0 11-4 0m4 0a2 2 0 11-4 0"})})}];return(0,n.jsxs)("div",{className:"min-h-screen bg-gray-100 flex",children:[(0,n.jsxs)("div",{className:"w-64 bg-white shadow-lg",children:[(0,n.jsx)("div",{className:"h-16 bg-green-700 flex items-center px-6",children:(0,n.jsx)("span",{className:"text-white text-lg font-semibold",children:"Admin Panel"})}),(0,n.jsxs)("nav",{className:"mt-6",children:[d.map((e=>(0,n.jsxs)(r.N_,{to:e.path,className:"flex items-center px-6 py-3 text-gray-700 hover:bg-gray-100 ".concat(t.pathname===e.path?"bg-gray-100 border-r-4 border-green-700":""),children:[e.icon,(0,n.jsx)("span",{className:"mx-3",children:e.name})]},e.path))),(0,n.jsxs)(r.N_,{to:"/",className:"flex items-center px-6 py-3 text-gray-700 hover:bg-gray-100 mt-4",children:[(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),(0,n.jsx)("span",{className:"mx-3",children:"Back to Site"})]})]})]}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"bg-white shadow-sm h-16 flex items-center px-8",children:[(0,n.jsx)("div",{className:"flex-1"}),(0,n.jsx)("div",{className:"flex items-center space-x-4",children:(0,n.jsx)("span",{className:"text-gray-700",children:"Admin"})})]}),(0,n.jsx)("div",{className:"p-8",children:s})]})]})}},4405:(e,s,t)=>{t.r(s),t.d(s,{default:()=>x});var a=t(9379),r=t(5043),n=t(5475),d=t(465),l=t(475),i=t(2339),c=t(9332),o=t(579);const x=()=>{const[e,s]=(0,r.useState)({totalOrders:0,pendingOrders:0,totalProducts:0,totalRevenue:0}),[t,x]=(0,r.useState)([]),[m,h]=(0,r.useState)(!0);(0,r.useEffect)((()=>{p()}),[]);const p=async()=>{try{h(!0);const{data:e,error:t}=await d.N.from("orders").select("*");if(t)throw t;const{data:a,error:r}=await d.N.from("products").select("*");if(r)throw r;const n=e.length,l=e.filter((e=>"pending"===e.status)).length,i=e.filter((e=>"Delivered"===e.status)).reduce(((e,s)=>e+(s.total_amount||0)),0);s({totalOrders:n,pendingOrders:l,totalProducts:a.length,totalRevenue:i});const{data:c,error:o}=await d.N.from("orders").select("\n          *,\n          order_items (\n            quantity,\n            price,\n            products (\n              name\n            )\n          )\n        ").order("created_at",{ascending:!1}).limit(5);if(o)throw o;x(c)}catch(e){console.error("Error fetching dashboard data:",e),i.Ay.error("Failed to load dashboard data")}finally{h(!1)}};return m?(0,o.jsx)("div",{className:"min-h-screen bg-gray-100 p-6",children:(0,o.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-700"})})}):(0,o.jsx)(c.A,{children:(0,o.jsx)("div",{className:"min-h-screen bg-gray-100",children:(0,o.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,o.jsx)("div",{className:"mb-8",children:(0,o.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"})}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,o.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"Total Orders"}),(0,o.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:e.totalOrders})]}),(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,o.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"Pending Orders"}),(0,o.jsx)("p",{className:"text-3xl font-bold text-yellow-600",children:e.pendingOrders})]}),(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,o.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"Total Products"}),(0,o.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:e.totalProducts})]}),(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,o.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"Total Revenue"}),(0,o.jsx)("p",{className:"text-3xl font-bold text-green-600",children:(0,l.$)(e.totalRevenue)})]})]}),(0,o.jsx)("div",{className:"mb-8",children:(0,o.jsxs)("div",{className:"flex space-x-4",children:[(0,o.jsx)(n.N_,{to:"/admin/products",className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Manage Products"}),(0,o.jsx)(n.N_,{to:"/admin/orders",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"View All Orders"})]})}),(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,o.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Recent Orders"})}),(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((e=>(0,o.jsxs)("tr",{children:[(0,o.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",e.id.slice(0,8)]}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.shipping_address}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,l.$)(e.total_amount)}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full\n                          ".concat("pending"===e.status?"bg-yellow-100 text-yellow-800":"","\n                          ").concat("processing"===e.status?"bg-blue-100 text-blue-800":"","\n                          ").concat("shipped"===e.status?"bg-green-100 text-green-800":"","\n                          ").concat("delivered"===e.status?"bg-green-100 text-green-800":"","\n                          ").concat("cancelled"===e.status?"bg-red-100 text-red-800":"","\n                        "),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,o.jsxs)("select",{className:"text-sm border-gray-300 rounded-md",value:e.status,onChange:s=>(async(e,s)=>{try{const{error:t}=await d.N.from("orders").update({status:s}).eq("id",e);if(t)throw t;x((t=>t.map((t=>t.id===e?(0,a.A)((0,a.A)({},t),{},{status:s}):t)))),i.Ay.success("Order status updated to ".concat(s))}catch(t){console.error("Error updating order status:",t),i.Ay.error("Failed to update order status")}})(e.id,s.target.value),children:[(0,o.jsx)("option",{value:"pending",children:"Pending"}),(0,o.jsx)("option",{value:"processing",children:"Processing"}),(0,o.jsx)("option",{value:"shipped",children:"Shipped"}),(0,o.jsx)("option",{value:"delivered",children:"Delivered"}),(0,o.jsx)("option",{value:"cancelled",children:"Cancelled"})]})})]},e.id)))})]})})]})]})})})}},475:(e,s,t)=>{t.d(s,{$:()=>a});const a=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}}]);
//# sourceMappingURL=405.a670fedf.chunk.js.map